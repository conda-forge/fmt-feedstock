From 1a599117d8ef331e68eb0d808d1fa04a48b1fcf2 Mon Sep 17 00:00:00 2001
From: Egor Pugin <egor.pugin@gmail.com>
Date: Tue, 3 Dec 2019 04:14:16 +0300
Subject: [PATCH 4/7] Export assert_fail with FMT_API. This fixes dll build.

---
 include/fmt/core.h       | 2 +-
 include/fmt/format-inl.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/include/fmt/core.h b/include/fmt/core.h
index d49f36e6..80e87e21 100644
--- a/include/fmt/core.h
+++ b/include/fmt/core.h
@@ -229,7 +229,7 @@ namespace internal {
 // A workaround for gcc 4.8 to make void_t work in a SFINAE context.
 template <typename... Ts> struct void_t_impl { using type = void; };
 
-void assert_fail(const char* file, int line, const char* message);
+FMT_API void assert_fail(const char* file, int line, const char* message);
 
 #ifndef FMT_ASSERT
 #  ifdef NDEBUG
diff --git a/include/fmt/format-inl.h b/include/fmt/format-inl.h
index 72b30466..21caeec9 100644
--- a/include/fmt/format-inl.h
+++ b/include/fmt/format-inl.h
@@ -55,7 +55,7 @@ inline fmt::internal::null<> strerror_s(char*, std::size_t, ...) { return {}; }
 FMT_BEGIN_NAMESPACE
 namespace internal {
 
-FMT_FUNC void assert_fail(const char* file, int line, const char* message) {
+FMT_API FMT_FUNC void assert_fail(const char* file, int line, const char* message) {
   print(stderr, "{}:{}: assertion failed: {}", file, line, message);
   std::abort();
 }
-- 
2.21.0 (Apple Git-122.2)

